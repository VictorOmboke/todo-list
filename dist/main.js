(()=>{"use strict";const e=function(){return{createProject:function(){const e=document.getElementById("projectForm"),t=(document.getElementById("editForm"),document.getElementById("projectCreator")),n=document.getElementById("projectDisplay"),o=document.getElementById("project"),d=document.getElementById("edit_project"),a=document.querySelector(".taskLauncher");let s=[];e.addEventListener("submit",(l=>{l.preventDefault();const c=document.getElementById("name").value;s.push(c),console.log(`New project added: ${c}`),console.log(s);let i=s.slice(-1);console.log(i);const r=document.createElement("button");r.classList.add("projectBtn"),r.textContent=i,n.appendChild(r);const u=document.createElement("option");u.text=i,o.add(u);const m=document.createElement("option");m.text=i,d.add(m),e.reset(),t.style.display="none",a.style.pointerEvents="auto"}))},taskFactory:function(e,t,n,o,d,a){return{id:e,title:t,note:n,date:o,priority:d,project:a}}}},t=function(){const t=[];let n=0;const o=document.getElementById("content"),d=document.getElementById("taskCreator"),a=document.getElementById("taskForm"),s=document.getElementById("projectCreator"),l=document.getElementById("taskEditor"),c=document.getElementById("editForm"),i=document.querySelector(".taskLauncher"),r=document.querySelector(".createProjectBtn"),u=document.querySelector(".taskClose"),m=document.querySelector(".projectClose"),p=document.querySelector(".editClose");return{launchTaskCreator:function(){i.addEventListener("click",(e=>{e.stopPropagation(),d.style.display="block",r.style.pointerEvents="none",a.reset()}))},closeTaskCreator:function(){u.addEventListener("click",(()=>{d.style.display="none",r.style.pointerEvents="auto"})),window.addEventListener("click",(e=>{d.contains(e.target)||(d.style.display="none",r.style.pointerEvents="auto")}))},launchProjectCreator:function(){r.addEventListener("click",(e=>{e.stopPropagation(),s.style.display="block",i.style.pointerEvents="none"}))},closeProjectCreator:function(){m.addEventListener("click",(()=>{s.style.display="none",i.style.pointerEvents="auto"})),window.addEventListener("click",(e=>{s.contains(e.target)||(s.style.display="none",i.style.pointerEvents="auto")}))},displayTask:function(){a.addEventListener("submit",(a=>{a.preventDefault();const u=t.length,m=document.getElementById("title").value,y=document.getElementById("add_note").value,E=document.getElementById("date").value,v=document.getElementById("priority").value,k=document.getElementById("project").value;let C=e().taskFactory(u,m,y,E,v,k);t.push(C),console.log(t),o.appendChild(function(e){n++;const t=document.createElement("div");t.classList.add("taskCard"),t.dataset.taskId=e.id,t.setAttribute("data-cardCounter",`card ${n}`);const o=document.createElement("input");o.classList.add("taskCheckBox"),o.setAttribute("type","checkbox");const d=document.createElement("div");d.setAttribute("id","iconContainer");const a=document.createElement("div");a.classList.add("taskLeft");const s=document.createElement("div");return s.classList.add("taskRight"),d.appendChild(function(){const e=document.createElement("img");return e.classList.add("editIcon"),e.src="../dist/icons/edit.svg",e.alt="Edit icon",e}()),d.appendChild(function(){const e=document.createElement("img");return e.classList.add("infoIcon"),e.src="../dist/icons/info.svg",e.alt="Information icon",e}()),d.appendChild(function(){const e=document.createElement("img");return e.classList.add("deleteIcon"),e.src="../dist/icons/delete.svg",e.alt="Delete Icon",e}()),a.appendChild(o),a.appendChild(function(){const e=document.getElementById("title").value,t=document.createElement("div");return t.classList.add("taskTitle"),t.textContent=e,t}()),s.appendChild(function(){const e=document.getElementById("date").value,t=document.createElement("div");return t.classList.add("taskDate"),t.textContent=e,t}()),s.appendChild(d),t.appendChild(a),t.appendChild(s),t}(C)),o.appendChild(function(e){const t=document.getElementById("title").value,n=document.getElementById("add_note").value,o=document.getElementById("date").value,d=document.getElementById("priority").value,a=document.getElementById("project").value,s=document.createElement("div");s.classList.add("taskCardDetailsContainer"),s.dataset.taskId=e.id,s.style.display="none";const l=document.createElement("button");l.classList.add("closeTaskDetailsBtn"),l.textContent="Close";const c=document.createElement("div");c.classList.add("taskCardDetails");const i=document.createElement("div");i.classList.add("taskDetailsTop");const r=document.createElement("div");r.classList.add("taskDetailsBottom");const u=document.createElement("div");u.classList.add("titleDetails"),u.textContent=`Title: ${t}`;const m=document.createElement("div");m.classList.add("noteDetails"),m.textContent=`Note: ${n}`;const p=document.createElement("div");p.classList.add("dateDetails"),p.textContent=`Date: ${o}`;const y=document.createElement("div");y.classList.add("priorityDetails"),y.textContent=`Priority: ${d}`;const E=document.createElement("div");return E.classList.add("projectDetails"),E.textContent=`Project: ${a}`,i.appendChild(u),i.appendChild(p),i.appendChild(y),r.appendChild(m),r.appendChild(E),c.appendChild(i),c.appendChild(r),c.appendChild(l),s.appendChild(c),s}(C)),document.querySelectorAll(".infoIcon").forEach((e=>{e.addEventListener("click",(e=>{e.target.closest(".taskCard").nextElementSibling.style.display="block",console.log("Task Details Opened")}))})),document.querySelectorAll(".closeTaskDetailsBtn").forEach((e=>{e.addEventListener("click",(()=>{e.closest(".taskCardDetailsContainer").style.display="none",console.log("task details closed")}))})),document.querySelectorAll(".deleteIcon").forEach((e=>{e.addEventListener("click",(e=>{const n=document.getElementById("content"),o=e.target.closest(".taskCard"),d=e.target.closest(".taskCard").nextElementSibling;if(o&&d){const e=o.dataset.taskId,a=t.findIndex((t=>t.id===parseInt(e)));-1!==a&&t.splice(a,1),n.removeChild(o),n.removeChild(d),console.log(t),console.log("This task was deleted")}}))})),document.querySelectorAll(".editIcon").forEach((e=>{e.addEventListener("click",(e=>{e.stopPropagation(),function(e){const n=document.getElementById("edit_title"),o=document.getElementById("edit_note"),d=document.getElementById("edit_date"),a=document.getElementById("edit_priority"),s=document.getElementById("edit_project"),l=t.find((t=>t.id===parseInt(e)));l?(n.value=`${l.title}`,o.value=`${l.note}`,d.value=`${l.date}`,a.value=`${l.priority}`,s.value=`${l.project}`):console.error("Task not found")}(e.target.closest(".taskCard").dataset.taskId),d.style.display="none",s.style.display="none",l.style.display="block",console.log("Task editor has been opened"),i.style.pointerEvents="none",r.style.pointerEvents="none"}))})),p.addEventListener("click",(()=>{l.style.display="none",i.style.pointerEvents="auto",r.style.pointerEvents="auto"})),window.addEventListener("click",(e=>{l.contains(e.target)||(l.style.display="none",i.style.pointerEvents="auto",r.style.pointerEvents="auto")})),function(){const e=document.getElementById("edit_title"),o=document.getElementById("edit_note"),d=document.getElementById("edit_date"),a=document.getElementById("edit_priority"),s=document.getElementById("edit_project");c.addEventListener("submit",(c=>{c.preventDefault();const i=document.querySelector(`[data-cardCounter="card ${n}"]`).dataset.taskId,r=t.find((e=>e.id===parseInt(i)));r?(r.title=e.value,r.note=o.value,r.date=d.value,r.priority=a.value,r.project=s.value,function(e,t){const n=document.querySelector(`.taskCard[data-task-id="${e}"]`);n&&(n.querySelector(".taskTitle").textContent=t.title,n.querySelector(".taskDate").textContent=t.date)}(i,r),function(e,t){const n=document.querySelector(`.taskCardDetailsContainer[data-task-id="${e}"]`);n&&(n.querySelector(".taskDetailsTop .titleDetails").textContent=`Title: ${t.title}`,n.querySelector(".taskDetailsTop .dateDetails").textContent=`Date: ${t.date}`,n.querySelector(".taskDetailsTop .priorityDetails").textContent=`Priority: ${t.priority}`,n.querySelector(".taskDetailsBottom .noteDetails").textContent=`Note: ${t.note}`,n.querySelector(".taskDetailsBottom .projectDetails").textContent=`Project: ${t.project}`)}(i,r),console.log(t),l.style.display="none"):console.error("Task not found")}))}(),d.style.display="none",r.style.pointerEvents="auto"}))}}}(),n=e();t.launchProjectCreator(),t.launchTaskCreator(),t.closeProjectCreator(),t.closeTaskCreator(),t.displayTask(),n.createProject()})();